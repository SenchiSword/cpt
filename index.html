<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.9, minimum-scale=0.5">
    <title>Cabinet Connect</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
    <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>
    <!-- Écran de connexion -->
    <div class="login-container" id="loginScreen">
        <div class="login-logo">
            <i class="fas fa-tooth"></i>
            <h1>Cabinet Connect</h1>
            <p>Cabinet Dentaire</p>
        </div>
        
        <form class="login-form" id="loginForm">
            <div class="form-group">
                <label for="username">Nom d'utilisateur</label>
                <input type="text" id="username" name="username" required>
            </div>
            
            <div class="form-group">
                <label for="password">Mot de passe</label>
                <input type="password" id="password" name="password" required>
            </div>
            
            <button type="submit" class="login-btn">
                <i class="fas fa-sign-in-alt"></i> Se connecter
            </button>
        </form>
        
        <div class="login-error" id="loginError">
            <i class="fas fa-exclamation-circle"></i> Identifiants incorrects
        </div>
    </div>
    
    <!-- Application principale -->
    <div class="app-container" id="appContainer">
        <div class="container">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="logo">
                    <i class="fas fa-tooth"></i>
                    <div class="logo-text">
                        <h1>Cabinet Connect</h1>
                        <p>Cabinet Dentaire</p>
                    </div>
                </div>
                
                <div class="user-info-sidebar">
                    <div style="font-weight: 600;" id="sidebarUserName">Cabinet Connect</div>
                    <div class="user-role" id="sidebarUserRole">Administrateur</div>
                </div>
                
                <ul class="menu">
                    <li class="menu-item active" id="dashboardTab">
                        <i class="fas fa-home"></i>
                        <span>Tableau de bord</span>
                    </li>
                    <li class="menu-item" id="patientsTab">
                        <i class="fas fa-users"></i>
                        <span>Liste des patients</span>
                    </li>
                    <li class="menu-item" id="appointmentsTab">
                        <i class="fas fa-calendar-alt"></i>
                        <span>Rendez-vous</span>
                    </li>
                    <li class="menu-item" id="accountingTab">
                        <i class="fas fa-calculator"></i>
                        <span>Accounting</span>
                    </li>
                    <!-- AJOUT: Lab Works dans la sidebar -->
                    <li class="menu-item" id="labWorksTab">
                        <i class="fas fa-flask"></i>
                        <span>Lab Works</span>
                    </li>
                    <li class="menu-item admin-only" id="usersTab" style="display: none;">
                        <i class="fas fa-user-cog"></i>
                        <span>Gestion des utilisateurs</span>
                    </li>
                </ul>
                
                <button class="logout-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Déconnexion
                </button>
            </div>
            
            <!-- Main Content -->
            <div class="main-content">
                <!-- Topbar -->
                <div class="topbar">
                    <div class="topbar-title">
                        <h2 id="pageTitle">Tableau de bord</h2>
                        <p id="pageSubtitle">Bienvenue dans votre espace de gestion</p>
                    </div>
                    
                    <div class="topbar-user">
                        <div class="user-avatar" id="topbarUserAvatar">DC</div>
                        <div>
                            <div style="font-weight: 600;" id="topbarUserName">Dr. Connect</div>
                            <div style="font-size: 13px; color: #666;" id="topbarUserRole">Administrateur</div>
                        </div>
                    </div>
                </div>
                
                <!-- Content -->
                <div class="content">
                    <!-- Dashboard Content -->
                    <div id="dashboardContent">
                        <!-- Dashboard Cards -->
                        <div class="dashboard-cards">
                            <div class="card patients">
                                <div class="card-icon">
                                    <i class="fas fa-user-injured"></i>
                                </div>
                                <h3>Patients</h3>
                                <p>Total des patients enregistrés</p>
                                <div class="card-number" id="totalPatients">0</div>
                                <div class="card-action">
                                    <button class="btn btn-secondary" id="viewAllPatientsBtn">Voir la liste</button>
                                    <button class="btn btn-primary" id="openPatientsCardBtn">
                                        <i class="fas fa-plus"></i> Nouveau
                                    </button>
                                </div>
                            </div>
                            
                            <div class="card rdv">
                                <div class="card-icon">
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                                <h3>Rendez-vous du jour</h3>
                                <p>Consultations programmées aujourd'hui</p>
                                <div class="card-number" id="todayAppointments">0</div>
                                <div class="card-action">
                                    <button class="btn btn-secondary" id="viewAppointmentsBtn">Voir Calendrier</button>
                                    <button class="btn btn-primary" id="addAppointmentBtn">
                                        <i class="fas fa-plus"></i> Ajouter
                                    </button>
                                </div>
                            </div>
                            
                            <div class="card factures">
                                <div class="card-icon">
                                    <i class="fas fa-file-invoice"></i>
                                </div>
                                <h3>Factures en attente</h3>
                                <p>Factures non réglées ce mois</p>
                                <div class="card-number" id="pendingInvoices">0</div>
                                <div class="card-action">
                                    <button class="btn btn-secondary" id="viewAccountingBtn">Voir Factures</button>
                                    <button class="btn-primary btn">
                                        <i class="fas fa-print"></i> Imprimer
                                    </button>
                                </div>
                            </div>
                            
                            <div class="card statistiques">
                                <div class="card-icon">
                                    <i class="fas fa-chart-line"></i>
                                </div>
                                <h3>Statistiques</h3>
                                <p>Activité du mois en cours</p>
                                <div class="card-number" id="activityStats">+0%</div>
                                <div class="card-action">
                                    <button class="btn btn-secondary">Détails</button>
                                    <button class="btn-primary btn">
                                        <i class="fas fa-download"></i> Exporter
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Recent Patients -->
                        <div class="recent-patients">
                            <h3 class="section-title">
                                <i class="fas fa-history"></i> Patients récemment ajoutés
                            </h3>
                            
                            <div id="recentPatientsContainer">
                                <!-- Les patients récents seront affichés ici -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Liste des patients -->
                    <div id="patientsListContent" style="display: none;">
                        <div class="recent-patients">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
                                <h3 class="section-title">
                                    <i class="fas fa-users"></i> Liste complète des patients
                                </h3>
                                <button class="btn btn-primary" id="addPatientFromListBtn">
                                    <i class="fas fa-plus"></i> Ajouter un patient
                                </button>
                            </div>
                            
                            <!-- Barre de recherche -->
                            <div class="search-container">
                                <div class="search-box">
                                    <input type="text" id="searchPatientInput" class="search-input" placeholder="Rechercher par nom, prénom ou ID...">
                                    <button class="search-btn" id="searchPatientBtn">
                                        <i class="fas fa-search"></i> Rechercher
                                    </button>
                                    <button class="btn btn-secondary" id="clearSearchBtn">
                                        <i class="fas fa-times"></i> Effacer
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Boutons d'export -->
                            <div class="export-buttons">
                                <button class="btn btn-info" onclick="exportPatientsToExcel()">
                                    <i class="fas fa-file-excel"></i> Exporter vers Excel
                                </button>
                            </div>
                            
                            <div id="allPatientsContainer">
                                <!-- Tous les patients seront affichés ici -->
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; text-align: center;">
                            <button class="btn btn-secondary" id="backToDashboardBtn">
                                <i class="fas fa-arrow-left"></i> Retour au tableau de bord
                            </button>
                        </div>
                    </div>
                    
                    <!-- Page Patient avec Onglets -->
                    <div class="patient-page" id="patientPage">
                        <div class="patient-header">
                            <div style="display: flex; align-items: center; flex-wrap: wrap; gap: 20px;">
                                <div class="patient-avatar-large" id="patientPageAvatar">AD</div>
                                <div class="patient-title">
                                    <h2 id="patientPageName">Nom du Patient</h2>
                                    <p>ID: <span id="patientPageId">PA-01/2024</span>  <span id="patientPageProfession">Profession</span></p>
                                    <div style="display: flex; gap: 10px; margin-top: 8px; flex-wrap: wrap;">
                                        <span class="status-badge status-active" id="patientPageStatus">Actif</span>
                                        <span class="info-badge" id="patientPageLastVisit">Dernière visite: N/A</span>
                                    </div>
                                    <!-- Les 4 boutons placés ici, en bas de Active et Dernière visite -->
                                    <div class="patient-header-actions">
                                        <button class="btn btn-edit" id="editPatientFromPageBtn">
                                            <i class="fas fa-edit"></i> Modifier les informations
                                        </button>
                                        <button class="btn btn-primary" id="addAppointmentFromPageBtn">
                                            <i class="fas fa-calendar-plus"></i> Nouveau rendez-vous
                                        </button>
                                        <button class="btn btn-danger" id="deletePatientFromPageBtn">
                                            <i class="fas fa-trash"></i> Supprimer le patient
                                        </button>
                                    </div>
                                </div>
                            </div>
                            <button class="back-to-patients" id="backToPatientsListBtn">
                                <i class="fas fa-arrow-left"></i> Retour à la liste
                            </button>
                        </div>

                        <!-- Onglets - SUPPRIMÉ Lab Works -->
                        <div class="patient-tabs">
                            <button class="patient-tab active" data-tab="informations">
                                <i class="fas fa-info-circle"></i> Informations
                            </button>
                            <button class="patient-tab" data-tab="initial">
                                <i class="fas fa-file-medical-alt"></i> Initial
                            </button>
                            <button class="patient-tab" data-tab="acts">
                                <i class="fas fa-procedures"></i> Acts
                            </button>
                            <button class="patient-tab" data-tab="documents">
                                <i class="fas fa-folder"></i> Documents
                            </button>
                            <button class="patient-tab" data-tab="appointments">
                                <i class="fas fa-calendar-alt"></i> Rendez-vous
                            </button>
                        </div>

                        <!-- Contenu des onglets -->
                        <div id="informationsTab" class="tab-content active">
                            <div class="tab-info-grid" id="informationsContent">
                                <!-- Les informations seront chargées dynamiquement -->
                            </div>
                        </div>

                        <div id="initialTab" class="tab-content">
                            <div class="coming-soon">
                                <i class="fas fa-file-medical-alt"></i>
                                <h3>Fiche Initiale</h3>
                                <p>Cette section est en cours de développement.</p>
                                <p>Elle contiendra l'examen initial, les antécédents médicaux détaillés, les allergies, etc.</p>
                            </div>
                        </div>

                        <div id="actsTab" class="tab-content">
                            <div class="acts-payments-container">
                                <div class="acts-payments-header">
                                    <h3><i class="fas fa-procedures"></i> Acts & Payments</h3>
                                    <div class="acts-summary">
                                        <div class="summary-item">
                                            <span class="summary-label">Total:</span>
                                            <span class="summary-value" id="totalAmount">0.00 DH</span>
                                        </div>
                                        <div class="summary-item">
                                            <span class="summary-label">Payé:</span>
                                            <span class="summary-value" id="paidAmount">0.00 DH</span>
                                        </div>
                                        <div class="summary-item">
                                            <span class="summary-label">Reste:</span>
                                            <span class="summary-value" id="remainingAmount">0.00 DH</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Formulaire pour ajouter un nouvel acte -->
                                <div class="new-act-form card-form" id="newActForm">
                                    <h4><i class="fas fa-plus-circle"></i> Ajouter un nouvel acte</h4>
                                    <table class="act-form-table">
                                        <thead>
                                            <tr>
                                                <th>Type d'acte *</th>
                                                <th>Dent *</th>
                                                <th>Prix (MAD) *</th>
                                                <th>Date *</th>
                                                <th>Notes</th>
                                                <th width="120">Action</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>
                                                    <input type="text" id="actType" class="form-input-small" placeholder="Extraction, Détartrage, etc." required>
                                                </td>
                                                <td>
                                                    <input type="text" id="actTooth" class="form-input-small" placeholder="14, 15, 16, etc." required>
                                                </td>
                                                <td>
                                                    <input type="number" id="actPrice" class="form-input-small" placeholder="0.00" min="0" step="0.01" required>
                                                </td>
                                                <td>
                                                    <input type="date" id="actDate" class="form-input-small" required>
                                                </td>
                                                <td>
                                                    <input type="text" id="actNotes" class="form-input-small" placeholder="Notes optionnelles">
                                                </td>
                                                <td>
                                                    <button class="btn btn-success btn-block" id="saveActBtn">
                                                        <i class="fas fa-plus"></i> Ajouter
                                                    </button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                
                                <!-- Liste des actes (expandable) -->
                                <div class="acts-section" id="actsListContainer">
                                    <!-- Les actes seront chargés dynamiquement ici -->
                                </div>
                            </div>
                        </div>

                        <div id="documentsTab" class="tab-content">
                            <div class="coming-soon">
                                <i class="fas fa-folder"></i>
                                <h3>Documents</h3>
                                <p>Cette section est en cours de développement.</p>
                                <p>Elle contiendra les documents scannés, les consentements, les ordonnances, etc.</p>
                            </div>
                        </div>

                        <div id="appointmentsTab" class="tab-content">
                            <div class="coming-soon">
                                <i class="fas fa-calendar-alt"></i>
                                <h3>Rendez-vous</h3>
                                <p>Cette section est en cours de développement.</p>
                                <p>Elle contiendra l'historique des rendez-vous, les prochains RDV, les statistiques, etc.</p>
                                <button class="btn btn-primary" style="margin-top: 15px;" id="viewPatientAppointmentsBtn">
                                    <i class="fas fa-eye"></i> Voir les rendez-vous du patient
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Calendrier des rendez-vous -->
                    <div id="appointmentsContent" style="display: none;">
                        <div class="recent-patients">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h3 class="section-title">
                                    <i class="fas fa-calendar-alt"></i> Calendrier des rendez-vous
                                </h3>
                                <button class="btn btn-success" id="newAppointmentBtn">
                                    <i class="fas fa-plus"></i> Nouveau rendez-vous
                                </button>
                            </div>
                            
                            <!-- Contrôles du calendrier -->
                            <div class="calendar-header">
                                <div class="calendar-nav">
                                    <button class="btn btn-small btn-secondary" id="prevDayBtn">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <div class="calendar-date" id="currentDayDate">Aujourd'hui</div>
                                    <button class="btn btn-small btn-secondary" id="nextDayBtn">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>
                                    <button class="btn btn-small btn-secondary" id="todayBtn">
                                        <i class="fas fa-calendar-day"></i> Aujourd'hui
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Vue Jour avec 2 salles côte à côte -->
                            <div id="dayView" class="day-view-container">
                                <!-- Salle 1 -->
                                <div class="room-day-view">
                                    <div class="room-title">
                                        <h3><i class="fas fa-door-closed"></i> Salle 1 - Dentisterie Générale</h3>
                                        <span class="room-status status-available" id="room1Status">Disponible</span>
                                    </div>
                                    <div class="day-schedule" id="room1Schedule">
                                        <!-- Planning de la journée pour la salle 1 -->
                                    </div>
                                </div>
                                
                                <!-- Salle 2 -->
                                <div class="room-day-view">
                                    <div class="room-title">
                                        <h3><i class="fas fa-door-closed"></i> Salle 2 - Chirurgie & Implants</h3>
                                        <span class="room-status status-available" id="room2Status">Disponible</span>
                                    </div>
                                    <div class="day-schedule" id="room2Schedule">
                                        <!-- Planning de la journée pour la salle 2 -->
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Tableau des rendez-vous patients -->
                            <div class="appointments-table-container">
                                <h3 class="section-title">
                                    <i class="fas fa-list"></i> Liste des rendez-vous
                                </h3>
                                
                                <div class="filter-controls">
                                    <div class="filter-group">
                                        <label for="filterDate">Date</label>
                                        <input type="date" id="filterDate" class="filter-select">
                                    </div>
                                    <div class="filter-group">
                                        <label for="filterPatient">Patient</label>
                                        <select id="filterPatient" class="filter-select">
                                            <option value="">Tous les patients</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="filterStatus">Statut</label>
                                        <select id="filterStatus" class="filter-select">
                                            <option value="">Tous les statuts</option>
                                            <option value="Confirmé">Confirmé</option>
                                            <option value="Annulé">Annulé</option>
                                            <option value="Absent">Absent</option>
                                            <option value="Terminé">Terminé</option>
                                        </select>
                                    </div>
                                    <div class="filter-group">
                                        <label for="filterRoom">Salle</label>
                                        <select id="filterRoom" class="filter-select">
                                            <option value="">Toutes les salles</option>
                                            <option value="1">Salle 1</option>
                                            <option value="2">Salle 2</option>
                                        </select>
                                    </div>
                                    <div class="filter-group" style="align-self: flex-end;">
                                        <button class="btn btn-secondary" id="resetFiltersBtn">
                                            <i class="fas fa-redo"></i> Réinitialiser
                                        </button>
                                    </div>
                                </div>
                                
                                <div id="appointmentsTableContainer">
                                    <!-- Tableau des rendez-vous -->
                                </div>
                            </div>
                            
                            <!-- Légende -->
                            <div style="margin-top: 15px; display: flex; gap: 15px; flex-wrap: wrap; font-size: 13px;">
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <div style="width: 18px; height: 18px; background-color: #e1edff; border: 1px solid #1a6dbb; border-radius: 4px;"></div>
                                    <span>Disponible</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <div style="width: 18px; height: 18px; background-color: #ffeaea; border: 1px solid #e74c3c; border-radius: 4px;"></div>
                                    <span>Occupé/Annulé</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <div style="width: 18px; height: 18px; background-color: #fff9e6; border: 1px solid #f39c12; border-radius: 4px;"></div>
                                    <span>Absent</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <div style="width: 18px; height: 18px; background-color: #f0e6ff; border: 1px solid #8a2be2; border-radius: 4px;"></div>
                                    <span>Terminé</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 6px;">
                                    <div style="width: 18px; height: 18px; background-color: #e7f7ef; border: 1px solid #00a86b; border-radius: 4px;"></div>
                                    <span>Confirmé</span>
                                </div>
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; text-align: center;">
                            <button class="btn btn-secondary" id="backToDashboardFromAppointmentsBtn">
                                <i class="fas fa-arrow-left"></i> Retour au tableau de bord
                            </button>
                        </div>
                    </div>
                    
                    <!-- Page Comptable -->
                    <div id="accountingContent" style="display: none;">
                        <div class="recent-patients">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
                                <h3 class="section-title">
                                    <i class="fas fa-calculator"></i> Gestions de factures
                                </h3>
                                <button class="btn btn-success" id="exportAccountingExcelBtn">
                                    <i class="fas fa-file-excel"></i> Exporter vers Excel
                                </button>
                            </div>
                            
                            <!-- Barre de recherche et filtres -->
                            <div class="search-container">
                                <div class="search-box" style="flex-wrap: wrap;">
                                    <input type="text" id="searchAccountingInput" class="search-input" placeholder="Rechercher par patient, acte ou facture...">
                                    <select id="filterAccountingInvoice" class="filter-select">
                                        <option value="">Toutes les factures</option>
                                        <option value="non-facture">Non facturés</option>
                                        <option value="facture">Facturés</option>
                                    </select>
                                    <select id="filterAccountingPatient" class="filter-select">
                                        <option value="">Tous les patients</option>
                                        <!-- Les patients seront ajoutés dynamiquement -->
                                    </select>
                                    <button class="search-btn" id="searchAccountingBtn">
                                        <i class="fas fa-search"></i> Rechercher
                                    </button>
                                    <button class="btn btn-secondary" id="clearAccountingSearchBtn">
                                        <i class="fas fa-times"></i> Effacer
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Tableau des actes pour facturation -->
                            <div class="accounting-table-container">
                                <table class="patients-table">
                                    <thead>
                                        <tr>
                                            <th>Date</th>
                                            <th>Type d'acte</th>
                                            <th>Nom du patient</th>
                                            <th>Dent</th>
                                            <th>Prix (MAD)</th>
                                            <th>Facture</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="accountingTableBody">
                                        <!-- Les données seront chargées dynamiquement -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div style="margin-top: 20px; text-align: center;">
                                <button class="btn btn-secondary" id="backToDashboardFromAccountingBtn">
                                    <i class="fas fa-arrow-left"></i> Retour au tableau de bord
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Page Lab Works -->
                    <div id="labWorksContent" style="display: none;">
                        <div class="recent-patients">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
                                <h3 class="section-title">
                                    <i class="fas fa-flask"></i> Travaux de Laboratoire
                                </h3>
                                <button class="btn btn-success" id="exportLabWorksExcelBtn">
                                    <i class="fas fa-file-excel"></i> Exporter vers Excel
                                </button>
                            </div>
                            
                            <!-- Barre de recherche et filtres -->
                            <div class="search-container">
                                <div class="search-box" style="flex-wrap: wrap;">
                                    <input type="text" id="searchLabNameInput" class="search-input" placeholder="Rechercher par nom de labo...">
                                    <select id="filterLabStatus" class="filter-select">
                                        <option value="">Tous les statuts</option>
                                        <option value="Not Started">Not Started</option>
                                        <option value="In Progress">In Progress</option>
                                        <option value="Completed">Completed</option>
                                        <option value="Ready">Ready</option>
                                        <option value="Delayed">Delayed</option>
                                    </select>
                                    <button class="btn btn-primary" id="addLabWorkBtn">
                                        <i class="fas fa-plus"></i> Ajouter Lab Work
                                    </button>
                                    <button class="search-btn" id="searchLabWorksBtn">
                                        <i class="fas fa-search"></i> Rechercher
                                    </button>
                                    <button class="btn btn-secondary" id="clearLabWorksSearchBtn">
                                        <i class="fas fa-times"></i> Effacer
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Tableau des Lab Works -->
                            <div class="accounting-table-container" style="margin-top: 20px;">
                                <table class="patients-table">
                                    <thead>
                                        <tr>
                                            <th>Date Sent</th>
                                            <th>Date Expectation</th>
                                            <th>Nom labo</th>
                                            <th>Téléphone</th>
                                            <th>Type Work</th>
                                            <th>Nom de patient</th>
                                            <th>Dent</th>
                                            <th>Statut</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="labWorksTableBody">
                                        <!-- Les données seront chargées dynamiquement -->
                                    </tbody>
                                </table>
                            </div>
                            
                            <div style="margin-top: 20px; text-align: center;">
                                <button class="btn btn-secondary" id="backToDashboardFromLabWorksBtn">
                                    <i class="fas fa-arrow-left"></i> Retour au tableau de bord
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Gestion des utilisateurs (Admin seulement) -->
                    <div id="usersContent" style="display: none;">
                        <div class="recent-patients">
                            <h3 class="section-title">
                                <i class="fas fa-user-cog"></i> Gestion des utilisateurs
                            </h3>
                            
                            <div style="margin-bottom: 20px;">
                                <button class="btn btn-primary" id="addUserBtn">
                                    <i class="fas fa-plus"></i> Ajouter un utilisateur
                                </button>
                            </div>
                            
                            <div id="usersListContainer">
                                <!-- Liste des utilisateurs -->
                            </div>
                        </div>
                        
                        <div style="margin-top: 20px; text-align: center;">
                            <button class="btn btn-secondary" id="backToDashboardFromUsersBtn">
                                <i class="fas fa-arrow-left"></i> Retour au tableau de bord
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal pour le formulaire de patient (nouveau et édition) -->
        <div class="modal" id="patientModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-file-medical-alt"></i> <span id="modalTitle">Formulaire de consultation - Nouveau patient</span></h3>
                    <button class="close-modal" id="closeModalBtn">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="form-container">
                        <div class="form-header">
                            <h2><i class="fas fa-file-medical-alt"></i> <span id="formHeaderTitle">Formulaire de consultation - Informations complètes</span></h2>
                        </div>
                        
                        <form id="patientForm" class="form-content">
                            <div class="left-column">
                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-user-circle"></i> Informations personnelles</h3>
                                    
                                    <input type="hidden" id="patientId" name="patientId">
                                    
                                    <div class="form-group">
                                        <label for="cin_passeport" class="form-label required">CIN / Passeport</label>
                                        <input type="text" id="cin_passeport" class="form-input" name="cin_passeport" placeholder="Numéro de CIN ou Passeport" required>
                                        <div class="info-text">Numéro de la carte d'identité nationale ou du passeport</div>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="age" class="form-label required">Âge</label>
                                            <input type="number" id="age" class="form-input" name="age" min="0" max="120" placeholder="Âge du patient" required>
                                            <div class="info-text">Calculé automatiquement à partir de la date de naissance</div>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="date-naissance" class="form-label required">Date de naissance</label>
                                        <div class="date-input">
                                            <input type="date" id="date-naissance" class="form-input" name="date-naissance" required>
                                            <i class="fas fa-calendar-alt"></i>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="situation" class="form-label required">Situation familiale</label>
                                        <select id="situation" class="form-select" name="situation" required>
                                            <option value="">Sélectionner</option>
                                            <option value="Célibataire">Célibataire</option>
                                            <option value="Marié(e)">Marié(e)</option>
                                            <option value="Divorcé(e)">Divorcé(e)</option>
                                            <option value="Veuf/Veuve">Veuf/Veuve</option>
                                        </select>
                                    </div>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="telephone" class="form-label required">Téléphone principal</label>
                                            <input type="tel" id="telephone" class="form-input" name="telephone" placeholder="+375 050 0000 000" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="email" class="form-label">E-mail</label>
                                            <input type="email" id="email" class="form-input" name="email" placeholder="patient@exemple.com">
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-notes-medical"></i> Motif de consultation</h3>
                                    
                                    <div class="form-group">
                                        <label for="motif" class="form-label required">Raison de consultation</label>
                                        <input type="text" id="motif" class="form-input" name="motif" placeholder="Ex: Doulour, contrôle, soin" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="dents-concernees" class="form-label">Dents concernées</label>
                                        <input type="text" id="dents-concernees" class="form-input" name="dents-concernees" placeholder="Ex: 14, 15, 16 ou Incisives supérieures">
                                        <div class="info-text">Numéros des dents ou description des zones concernées</div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="premiere-consultation" class="form-label required">Date de première consultation</label>
                                        <div class="date-input">
                                            <input type="date" id="premiere-consultation" class="form-input" name="premiere-consultation" required>
                                            <i class="fas fa-calendar-alt"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="right-column">
                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-address-card"></i> Informations de contact</h3>
                                    
                                    <div class="form-row">
                                        <div class="form-group">
                                            <label for="prenom" class="form-label required">Prénom</label>
                                            <input type="text" id="prenom" class="form-input" name="prenom" placeholder="Prénom du patient" required>
                                        </div>
                                        <div class="form-group">
                                            <label for="nom" class="form-label required">Nom</label>
                                            <input type="text" id="nom" class="form-input" name="nom" placeholder="Nom du patient" required>
                                        </div>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="adresse" class="form-label required">Adresse</label>
                                        <input type="text" id="adresse" class="form-input" name="adresse" placeholder="Adresse complète" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="profession" class="form-label required">Profession</label>
                                        <input type="text" id="profession" class="form-input" name="profession" placeholder="Profession du patient" required>
                                    </div>
                                </div>
                                
                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-exclamation-triangle"></i> Personne à contacter en cas d'urgence</h3>
                                    
                                    <div class="form-group">
                                        <label for="contact-urgence-nom" class="form-label required">Nom et Prénom</label>
                                        <input type="text" id="contact-urgence-nom" class="form-input" name="contact-urgence-nom" placeholder="Nom complet de la personne à contacter" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="lien-parente" class="form-label required">Lien de parenté</label>
                                        <input type="text" id="lien-parente" class="form-input" name="lien-parente" placeholder="Relation avec le patient (conjoint, parent, etc.)" required>
                                    </div>
                                    
                                    <div class="form-group">
                                        <label for="tel-urgence" class="form-label required">Téléphone d'urgence</label>
                                        <input type="tel" id="tel-urgence" class="form-input" name="tel-urgence" placeholder="+375 0500 0000 000" required>
                                    </div>
                                </div>
                                
                                <!-- Section des habitudes de vie -->
                                <div id="habitsSection" class="habits-section">
                                    <h3 class="form-section-title"><i class="fas fa-heartbeat"></i> Habitudes de vie</h3>
                                    
                                    <div class="form-group">
                                        <label class="form-label">Habitudes quotidiennes</label>
                                        <div class="select-group">
                                            <div class="select-item">
                                                <label for="tabac">Tabac</label>
                                                <select id="tabac" class="select-small" name="tabac">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Non">Non</option>
                                                    <option value="Occasionnel">Occasionnel</option>
                                                    <option value="Régulier">Régulier</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="alcool">Alcool</label>
                                                <select id="alcool" class="select-small" name="alcool">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Non">Non</option>
                                                    <option value="Occasionnel">Occasionnel</option>
                                                    <option value="Régulier">Régulier</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="cafe-the">Café / Thé</label>
                                                <select id="cafe-the" class="select-small" name="cafe-the">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Non">Non</option>
                                                    <option value="Occasionnel">Occasionnel</option>
                                                    <option value="Régulier">Régulier</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="niveau-stress">Niveau de stress</label>
                                                <select id="niveau-stress" class="select-small" name="niveau-stress">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Faible">Faible</option>
                                                    <option value="Moyen">Moyen</option>
                                                    <option value="Élevé">Élevé</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="sommeil">Sommeil</label>
                                                <select id="sommeil" class="select-small" name="sommeil">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Mauvais">Mauvais</option>
                                                    <option value="Moyen">Moyen</option>
                                                    <option value="Bon">Bon</option>
                                                    <option value="Excellent">Excellent</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <!-- Section des antécédents médicaux -->
                                <div id="antecedentsSection" class="habits-section">
                                    <h3 class="form-section-title"><i class="fas fa-file-medical"></i> Antécédents médicaux</h3>
                                    
                                    <div class="form-group">
                                        <div class="select-group">
                                            <div class="select-item">
                                                <label for="allergies">Allergies</label>
                                                <select id="allergies" class="select-small" name="allergies">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Oui">Oui</option>
                                                    <option value="Non">Non</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="maladies-cardiaques">Maladies cardiaques</label>
                                                <select id="maladies-cardiaques" class="select-small" name="maladies-cardiaques">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Oui">Oui</option>
                                                    <option value="Non">Non</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="hypertension">Hypertension artérielle</label>
                                                <select id="hypertension" class="select-small" name="hypertension">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Oui">Oui</option>
                                                    <option value="Non">Non</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="diabete">Diabète</label>
                                                <select id="diabete" class="select-small" name="diabete">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Oui">Oui</option>
                                                    <option value="Non">Non</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="troubles-coagulation">Troubles de coagulation</label>
                                                <select id="troubles-coagulation" class="select-small" name="troubles-coagulation">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Oui">Oui</option>
                                                    <option value="Non">Non</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="maladies-infectieuses">Maladies infectieuses</label>
                                                <select id="maladies-infectieuses" class="select-small" name="maladies-infectieuses">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Oui">Oui</option>
                                                    <option value="Non">Non</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="traitement-cours">Traitement médical en cours</label>
                                                <select id="traitement-cours" class="select-small" name="traitement-cours">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Oui">Oui</option>
                                                    <option value="Non">Non</option>
                                                </select>
                                            </div>
                                            <div class="select-item">
                                                <label for="grossesse">Grossesse (si applicable)</label>
                                                <select id="grossesse" class="select-small" name="grossesse">
                                                    <option value="">Sélectionner</option>
                                                    <option value="Oui">Oui</option>
                                                    <option value="Non">Non</option>
                                                    <option value="Non applicable">Non applicable</option>
                                                </select>
                                            </div>
                                        </div>
                                        
                                        <!-- Détails des antécédents (champ texte) -->
                                        <div style="margin-top: 15px;">
                                            <label for="antecedents-details" class="form-label">Détails des antécédents médicaux</label>
                                            <textarea id="antecedents-details" class="form-textarea" name="antecedents-details" placeholder="Précisez les détails des antécédents (allergies spécifiques, traitement en cours, etc.)..." rows="3"></textarea>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="form-section">
                                    <h3 class="form-section-title"><i class="fas fa-sticky-note"></i> Notes supplémentaires</h3>
                                    
                                    <div class="form-group">
                                        <label for="notes" class="form-label">Informations complémentaires sur la consultation</label>
                                        <textarea id="notes" class="form-textarea" name="notes" placeholder="Antécédents médicaux, allergies, observations particulières..."></textarea>
                                    </div>
                                    
                                    <div class="checkbox-group">
                                        <input type="checkbox" id="consentement" name="consentement" required>
                                        <label for="consentement" class="required">Le patient a pris connaissance et accepte les conditions de traitement des données personnelles</label>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="form-buttons">
                                <button type="reset" class="form-btn-reset" id="formResetBtn"><i class="fas fa-redo-alt"></i> Réinitialiser le formulaire</button>
                                <button type="submit" class="form-btn-submit" id="submitFormBtn"><i class="fas fa-save"></i> <span id="submitButtonText">Enregistrer le nouveau patient</span></button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal pour créer un nouveau rendez-vous -->
        <div class="modal appointment-modal" id="appointmentModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3><i class="fas fa-calendar-plus"></i> <span id="appointmentModalTitle">Nouveau rendez-vous</span></h3>
                    <button class="close-modal" id="closeAppointmentModalBtn">&times;</button>
                </div>
                <div class="appointment-form">
                    <form id="appointmentForm">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="appointmentPatient" class="form-label required">Patient</label>
                                <select id="appointmentPatient" class="form-select" name="appointmentPatient" required>
                                    <option value="">Sélectionner un patient</option>
                                    <!-- Les patients seront ajoutés dynamiquement -->
                                </select>
                                <div class="patient-selection" id="patientSelectionList" style="display: none;">
                                    <!-- Liste des patients pour sélection rapide -->
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="appointmentType" class="form-label required">Type de consultation</label>
                                <select id="appointmentType" class="form-select" name="appointmentType" required>
                                    <option value="">Sélectionner</option>
                                    <option value="Consultation générale">Consultation générale</option>
                                    <option value="Contrôle">Contrôle</option>
                                    <option value="Détartrage">Détartrage</option>
                                    <option value="Soin carie">Soin carie</option>
                                    <option value="Extraction">Extraction</option>
                                    <option value="Implant">Implant</option>
                                    <option value="Prothèse">Prothèse</option>
                                    <option value="Orthodontie">Orthodontie</option>
                                    <option value="Urgence">Urgence</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="appointmentDate" class="form-label required">Date</label>
                                <div class="date-input">
                                    <input type="date" id="appointmentDate" class="form-input" name="appointmentDate" required>
                                    <i class="fas fa-calendar-alt"></i>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="appointmentTime" class="form-label required">Heure</label>
                                <select id="appointmentTime" class="form-select" name="appointmentTime" required>
                                    <option value="">Sélectionner l'heure</option>
                                    <!-- Les créneaux horaires seront ajoutés dynamiquement -->
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="appointmentRoom" class="form-label required">Salle</label>
                                <select id="appointmentRoom" class="form-select" name="appointmentRoom" required>
                                    <option value="">Sélectionner une salle</option>
                                    <option value="1">Salle 1 - Dentisterie Générale</option>
                                    <option value="2">Salle 2 - Chirurgie & Implants</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="appointmentDuration" class="form-label required">Durée</label>
                                <select id="appointmentDuration" class="form-select" name="appointmentDuration" required>
                                    <option value="30">30 minutes</option>
                                    <option value="45">45 minutes</option>
                                    <option value="60" selected>1 heure</option>
                                    <option value="90">1 heure 30</option>
                                    <option value="120">2 heures</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="appointmentNotes" class="form-label">Notes supplémentaires</label>
                            <textarea id="appointmentNotes" class="form-textarea" name="appointmentNotes" placeholder="Informations complémentaires sur le rendez-vous..." rows="3"></textarea>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="button" class="form-btn-reset" id="cancelAppointmentBtn">Annuler</button>
                            <button type="submit" class="form-btn-submit">
                                <i class="fas fa-save"></i> Enregistrer le rendez-vous
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        
        <!-- Modal pour gérer les statuts de rendez-vous -->
        <div class="modal" id="appointmentStatusModal">
            <div class="modal-content" style="max-width: 500px;">
                <div class="modal-header">
                    <h3><i class="fas fa-calendar-check"></i> <span id="appointmentStatusModalTitle">Gérer le rendez-vous</span></h3>
                    <button class="close-modal" id="closeAppointmentStatusModalBtn">&times;</button>
                </div>
                <div class="appointment-form" style="padding: 20px;">
                    <input type="hidden" id="statusAppointmentId">
                    
                    <div class="form-group">
                        <label class="form-label">Patient</label>
                        <div style="padding: 10px; background-color: #f5f9ff; border-radius: 6px; font-weight: 600;" id="statusPatientName"></div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Date et heure</label>
                        <div style="padding: 10px; background-color: #f5f9ff; border-radius: 6px;" id="statusDateTime"></div>
                    </div>
                    
                    <div class="form-group">
                        <label for="statusSelect" class="form-label required">Changer le statut</label>
                        <select id="statusSelect" class="form-select" required>
                            <option value="Confirmé">Confirmé</option>
                            <option value="Annulé">Annulé</option>
                            <option value="Absent">Absent</option>
                            <option value="Terminé">Terminé</option>
                        </select>
                    </div>
                    
                    <div class="form-group" id="statusReasonGroup" style="display: none;">
                        <label for="statusReason" class="form-label">Raison (optionnel)</label>
                        <textarea id="statusReason" class="form-textarea" placeholder="Raison de l'annulation ou de l'absence..." rows="3"></textarea>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="button" class="form-btn-reset" id="cancelStatusBtn">Annuler</button>
                        <button type="button" class="form-btn-submit" id="saveStatusBtn">
                            <i class="fas fa-save"></i> Enregistrer le statut
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal pour modifier un rendez-vous -->
        <div class="modal" id="editAppointmentModal">
            <div class="modal-content" style="max-width: 600px;">
                <div class="modal-header">
                    <h3><i class="fas fa-edit"></i> <span id="editAppointmentModalTitle">Modifier le rendez-vous</span></h3>
                    <button class="close-modal" id="closeEditAppointmentModalBtn">&times;</button>
                </div>
                <div class="appointment-form" style="padding: 20px;">
                    <input type="hidden" id="editAppointmentId">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editAppointmentPatient" class="form-label required">Patient</label>
                            <div style="padding: 10px; background-color: #f5f9ff; border-radius: 6px; font-weight: 600;" id="editPatientName"></div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editAppointmentDate" class="form-label required">Date</label>
                            <div class="date-input">
                                <input type="date" id="editAppointmentDate" class="form-input" name="editAppointmentDate" required>
                                <i class="fas fa-calendar-alt"></i>
                            </div>
                        </div>
                        <div class="form-group">
                            <label for="editAppointmentTime" class="form-label required">Heure</label>
                            <select id="editAppointmentTime" class="form-select" name="editAppointmentTime" required>
                                <option value="">Sélectionner l'heure</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editAppointmentRoom" class="form-label required">Salle</label>
                            <select id="editAppointmentRoom" class="form-select" name="editAppointmentRoom" required>
                                <option value="">Sélectionner une salle</option>
                                <option value="1">Salle 1 - Dentisterie Générale</option>
                                <option value="2">Salle 2 - Chirurgie & Implants</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="editAppointmentDuration" class="form-label required">Durée</label>
                            <select id="editAppointmentDuration" class="form-select" name="editAppointmentDuration" required>
                                <option value="30">30 minutes</option>
                                <option value="45">45 minutes</option>
                                <option value="60">1 heure</option>
                                <option value="90">1 heure 30</option>
                                <option value="120">2 heures</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editAppointmentType" class="form-label required">Type de consultation</label>
                            <select id="editAppointmentType" class="form-select" name="editAppointmentType" required>
                                <option value="">Sélectionner</option>
                                <option value="Consultation générale">Consultation générale</option>
                                <option value="Contrôle">Contrôle</option>
                                <option value="Détartrage">Détartrage</option>
                                <option value="Soin carie">Soin carie</option>
                                <option value="Extraction">Extraction</option>
                                <option value="Implant">Implant</option>
                                <option value="Prothèse">Prothèse</option>
                                <option value="Orthodontie">Orthodontie</option>
                                <option value="Urgence">Urgence</option>
                                </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="editAppointmentNotes" class="form-label">Notes supplémentaires</label>
                        <textarea id="editAppointmentNotes" class="form-textarea" name="editAppointmentNotes" placeholder="Informations complémentaires sur le rendez-vous..." rows="3"></textarea>
                    </div>
                    
                    <div class="form-buttons">
                        <button type="button" class="form-btn-reset" id="cancelEditAppointmentBtn">Annuler</button>
                        <button type="button" class="form-btn-submit" id="saveEditAppointmentBtn">
                            <i class="fas fa-save"></i> Enregistrer les modifications
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Modal pour Lab Works -->
        <div class="modal" id="labWorkModal">
            <div class="modal-content" style="max-width: 800px;">
                <div class="modal-header">
                    <h3><i class="fas fa-flask"></i> <span id="labWorkModalTitle">Nouveau travail de laboratoire</span></h3>
                    <button class="close-modal" id="closeLabWorkModalBtn">&times;</button>
                </div>
                <div class="appointment-form" style="padding: 20px;">
                    <form id="labWorkForm">
                        <input type="hidden" id="labWorkId">
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="labName" class="form-label required">Nom du laboratoire</label>
                                <input type="text" id="labName" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="labPhone" class="form-label">Téléphone</label>
                                <input type="tel" id="labPhone" class="form-input" placeholder="+212 XXX XXX XXX">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="labWorkType" class="form-label required">Type de travail</label>
                                <input type="text" id="labWorkType" class="form-input" placeholder="Couronne, Bridge, Prothèse, etc." required>
                            </div>
                            <div class="form-group">
                                <label for="labWorkTooth" class="form-label">Dent(s)</label>
                                <input type="text" id="labWorkTooth" class="form-input" placeholder="14, 15, 16, etc.">
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="labWorkDateSent" class="form-label required">Date d'envoi</label>
                                <input type="date" id="labWorkDateSent" class="form-input" required>
                            </div>
                            <div class="form-group">
                                <label for="labWorkDateExpectation" class="form-label required">Date d'expectation</label>
                                <input type="date" id="labWorkDateExpectation" class="form-input" required>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="labWorkStatus" class="form-label required">Statut</label>
                                <select id="labWorkStatus" class="form-select" required>
                                    <option value="Not Started">Not Started</option>
                                    <option value="In Progress">In Progress</option>
                                    <option value="Completed">Completed</option>
                                    <option value="Ready">Ready</option>
                                    <option value="Delayed">Delayed</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="labWorkPatientSelect" class="form-label">Patient</label>
                                <select id="labWorkPatientSelect" class="form-select">
                                    <option value="">Sélectionner un patient...</option>
                                </select>
                                <div style="margin-top: 8px; padding: 8px; background-color: #f5f9ff; border-radius: 6px;">
                                    Patient sélectionné: <strong id="selectedPatientName">Aucun patient sélectionné</strong>
                                </div>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="labWorkNotes" class="form-label">Notes</label>
                            <textarea id="labWorkNotes" class="form-textarea" rows="4" placeholder="Notes supplémentaires..."></textarea>
                        </div>
                        
                        <div class="form-buttons">
                            <button type="button" class="form-btn-reset" onclick="closeLabWorkModal()">Annuler</button>
                            <button type="submit" class="form-btn-submit" id="submitLabWorkBtn">
                                <i class="fas fa-save"></i> Enregistrer
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- CORE -->
    <script src="assets/js/core/utils.js"></script>
    <script src="assets/js/core/storage.js"></script>
    <script src="assets/js/core/app.js"></script>
    
    <!-- MODULES -->
    <script src="assets/js/modules/auth.js"></script>
    <script src="assets/js/modules/patients.js"></script>
    <script src="assets/js/modules/appointments.js"></script>
    <script src="assets/js/modules/acts.js"></script>
    <script src="assets/js/modules/labworks.js"></script>
    <script src="assets/js/modules/accounting.js"></script>

    <!-- UI -->
    <script src="assets/js/ui/ui.js"></script>
</body>
</html>